#!/usr/bin/env ruby
require 'gli'
require 'soundcloud'
require 'vlc-client'
require_relative '../lib/sc'

include GLI::App

program_desc '**************Totally Awesome ☁☁☁ SoundCloud ☁☁☁ Command Line App**************'

version "0.0.1"

desc 'Search sounds, users or playlists to play'
command :search do |c|
  c.switch [:t, :tracks], desc: "Search for tracks"
  c.action do |global, options, args|
    executor = global.fetch(:executor)
    executor.search(options, args.first)
  end
end

pre do |global,command,options,args|
  sc_client         = Soundcloud.new(client_id: '32670b0d40eb8b1b87eac9607e13f843')
  global[:executor] = Sc::ExecutesCommands.new(Sc::SoundCloudClient.new(sc_client))
  true
end

exit run(ARGV)
